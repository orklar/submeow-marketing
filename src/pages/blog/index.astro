---
import MarketingLayout from '../../layouts/MarketingLayout.astro';
import Button from '../../components/Button.astro';

// ============================================
// Blog Post Data (mirrors [slug].astro)
// ============================================

interface BlogPost {
  slug: string;
  title: string;
  category: string;
  categoryColor: string;
  author: string;
  date: string;
  readingTime: string;
  excerpt: string;
}

const blogPosts: BlogPost[] = [
  {
    slug: '5-hidden-subscriptions-costing-you-money',
    title: '5 Hidden Subscriptions That Might Be Costing You Money',
    category: 'Money Saving',
    categoryColor: 'primary',
    author: 'SubMeow Team',
    date: '2026-02-01',
    readingTime: '4 min',
    excerpt: 'You might be paying for services you\'ve forgotten about. Here are the most common hidden subscriptions and how to find them.',
  },
  {
    slug: 'subscription-fatigue-how-to-simplify',
    title: 'Subscription Fatigue Is Real: How to Simplify Your Digital Life',
    category: 'Lifestyle',
    categoryColor: 'accent',
    author: 'SubMeow Team',
    date: '2026-01-28',
    readingTime: '6 min',
    excerpt: 'Feeling overwhelmed by the number of subscriptions you manage? Learn practical strategies to simplify and regain control.',
  },
  {
    slug: 'how-to-track-subscriptions-effectively',
    title: 'How to Track Your Subscriptions Effectively in 2026',
    category: 'Tips & Tricks',
    categoryColor: 'accent',
    author: 'SubMeow Team',
    date: '2026-01-15',
    readingTime: '5 min',
    excerpt: 'Managing multiple subscriptions can be overwhelming. Here\'s how SubMeow helps you stay on top of every recurring payment.',
  },
];

// Featured post is the first (most recent) post
const featuredPost = blogPosts[0];
const remainingPosts = blogPosts.slice(1);

// Format the date for display
function formatDate(dateStr: string): string {
  const date = new Date(dateStr + 'T00:00:00');
  return date.toLocaleDateString('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  });
}

// Category badge color mapping
function getCategoryClasses(color: string): string {
  const map: Record<string, string> = {
    accent: 'bg-accent-100 text-accent-500',
    primary: 'bg-primary-100 text-primary-500',
  };
  return map[color] || map.accent;
}
---

<MarketingLayout title="Blog - SubMeow" description="Tips, tricks, and insights about subscription management, saving money, and getting the most out of SubMeow.">

  <!-- ==========================================
       Hero Section
       ========================================== -->
  <section class="relative overflow-hidden bg-gradient-to-b from-cream/40 to-white">
    <div class="max-w-7xl mx-auto px-6 lg:px-8 py-16 md:py-24">
      <div class="text-center max-w-3xl mx-auto">
        <!-- Badge -->
        <span class="inline-block bg-accent-100 text-accent-500 px-4 py-1.5 rounded-full text-sm font-semibold mb-6">Blog</span>

        <!-- Headline -->
        <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold text-dark-text leading-tight mb-6">
          The <span class="text-accent-500">SubMeow</span> Blog
        </h1>

        <!-- Subtitle -->
        <p class="text-lg md:text-xl text-light-text max-w-2xl mx-auto leading-relaxed">
          Tips for managing subscriptions, saving money, and making the most of your digital life. Written by the team behind SubMeow.
        </p>
      </div>
    </div>

    <!-- Decorative blurred circles -->
    <div class="absolute top-1/3 left-1/4 w-64 h-64 bg-accent-200/20 rounded-full blur-3xl -z-10" aria-hidden="true"></div>
    <div class="absolute bottom-1/4 right-1/4 w-48 h-48 bg-primary-200/20 rounded-full blur-3xl -z-10" aria-hidden="true"></div>

    <!-- Bottom gradient fade -->
    <div class="absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-white to-transparent pointer-events-none" aria-hidden="true"></div>
  </section>

  <!-- ==========================================
       Featured Post
       ========================================== -->
  <section class="py-8 md:py-12">
    <div class="max-w-7xl mx-auto px-6 lg:px-8">
      <a
        href={`/blog/${featuredPost.slug}`}
        class="group block bg-gradient-to-br from-accent-50 to-white rounded-3xl shadow-lg hover:shadow-2xl border border-accent-100 overflow-hidden transition-all hover:-translate-y-1"
      >
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-0">
          <!-- Left: Decorative Visual -->
          <div class="relative bg-gradient-to-br from-accent-500 to-accent-600 p-8 md:p-12 flex items-center justify-center min-h-[240px] lg:min-h-[320px]">
            <!-- Decorative cat and text elements -->
            <div class="text-center">
              <span class="text-7xl md:text-8xl block mb-4" aria-hidden="true">&#128058;</span>
              <span class="inline-block bg-white/20 text-white px-4 py-1.5 rounded-full text-sm font-semibold">Featured Article</span>
            </div>
            <!-- Decorative blobs -->
            <div class="absolute top-1/4 left-1/4 w-32 h-32 bg-white/10 rounded-full blur-2xl" aria-hidden="true"></div>
            <div class="absolute bottom-1/4 right-1/4 w-24 h-24 bg-white/10 rounded-full blur-2xl" aria-hidden="true"></div>
          </div>

          <!-- Right: Content -->
          <div class="p-8 md:p-12 flex flex-col justify-center">
            <!-- Category Badge -->
            <span class={`inline-block self-start px-3 py-1 rounded-full text-xs font-semibold mb-4 ${getCategoryClasses(featuredPost.categoryColor)}`}>
              {featuredPost.category}
            </span>

            <!-- Title -->
            <h2 class="text-2xl sm:text-3xl font-bold text-dark-text group-hover:text-accent-500 transition-colors mb-4 leading-tight">
              {featuredPost.title}
            </h2>

            <!-- Excerpt -->
            <p class="text-light-text leading-relaxed mb-6">
              {featuredPost.excerpt}
            </p>

            <!-- Meta Row -->
            <div class="flex flex-wrap items-center gap-3 text-sm text-light-text mb-6">
              <div class="flex items-center gap-1.5">
                <div class="w-6 h-6 rounded-full bg-accent-200 flex items-center justify-center shrink-0">
                  <span class="text-xs" aria-hidden="true">&#128058;</span>
                </div>
                <span>{featuredPost.author}</span>
              </div>
              <span aria-hidden="true">&middot;</span>
              <time datetime={featuredPost.date}>{formatDate(featuredPost.date)}</time>
              <span aria-hidden="true">&middot;</span>
              <span>{featuredPost.readingTime} read</span>
            </div>

            <!-- Read More -->
            <span class="inline-flex items-center gap-2 text-accent-500 font-semibold group-hover:gap-3 transition-all">
              Read article
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </span>
          </div>
        </div>
      </a>
    </div>
  </section>

  <!-- ==========================================
       All Articles Grid
       ========================================== -->
  <section class="py-12 md:py-16">
    <div class="max-w-7xl mx-auto px-6 lg:px-8">
      <!-- Section Header -->
      <div class="flex items-center justify-between mb-10">
        <h2 class="text-2xl sm:text-3xl font-bold text-dark-text">All articles</h2>
        <span class="text-sm text-light-text">{blogPosts.length} articles</span>
      </div>

      <!-- Post Cards Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {blogPosts.map((post) => (
          <a
            href={`/blog/${post.slug}`}
            class="group bg-white rounded-2xl shadow-sm hover:shadow-xl border border-gray-100 overflow-hidden transition-all hover:-translate-y-1 flex flex-col"
          >
            <!-- Colored Top Bar -->
            <div class={`h-2 ${post.categoryColor === 'primary' ? 'bg-primary-500' : 'bg-accent-500'}`} />

            <div class="p-6 flex flex-col flex-1">
              <!-- Category Badge -->
              <span class={`inline-block self-start px-3 py-1 rounded-full text-xs font-semibold mb-3 ${getCategoryClasses(post.categoryColor)}`}>
                {post.category}
              </span>

              <!-- Title -->
              <h3 class="text-lg font-bold text-dark-text group-hover:text-accent-500 transition-colors mb-3 leading-snug line-clamp-2">
                {post.title}
              </h3>

              <!-- Excerpt -->
              <p class="text-sm text-light-text leading-relaxed mb-4 flex-1 line-clamp-3">
                {post.excerpt}
              </p>

              <!-- Bottom Meta Row -->
              <div class="flex items-center justify-between pt-4 border-t border-gray-100 mt-auto">
                <div class="flex items-center gap-3 text-xs text-light-text">
                  <div class="flex items-center gap-1.5">
                    <div class="w-5 h-5 rounded-full bg-accent-200 flex items-center justify-center shrink-0">
                      <span class="text-[10px]" aria-hidden="true">&#128058;</span>
                    </div>
                    <span>{post.author}</span>
                  </div>
                  <span aria-hidden="true">&middot;</span>
                  <time datetime={post.date}>{formatDate(post.date)}</time>
                </div>
                <span class="text-xs text-light-text flex items-center gap-1">
                  <svg class="w-3.5 h-3.5 shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                  </svg>
                  {post.readingTime}
                </span>
              </div>

              <!-- Read More Link -->
              <div class="mt-4">
                <span class="inline-flex items-center gap-1.5 text-sm text-accent-500 font-semibold group-hover:gap-2.5 transition-all">
                  Read more
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
                  </svg>
                </span>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- ==========================================
       Newsletter CTA Section
       ========================================== -->
  <section class="py-16 md:py-24 bg-gradient-to-br from-cream to-accent-100">
    <div class="max-w-3xl mx-auto px-6 lg:px-8 text-center">
      <!-- Cat Mascot -->
      <div class="text-6xl md:text-7xl mb-6" aria-hidden="true">&#128570;</div>

      <!-- Headline -->
      <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-dark-text mb-4">
        Want more tips from Sub?
      </h2>

      <!-- Subtitle -->
      <p class="text-lg text-light-text mb-8 max-w-xl mx-auto leading-relaxed">
        Get the latest articles on subscription management, money-saving strategies, and SubMeow updates delivered to your inbox.
      </p>

      <!-- Email Signup (visual only) -->
      <div class="flex flex-col sm:flex-row items-center justify-center gap-3 max-w-md mx-auto">
        <input
          type="email"
          placeholder="your@email.com"
          class="w-full sm:flex-1 px-5 py-3 rounded-xl border-2 border-gray-200 focus:border-accent-500 focus:outline-none text-dark-text placeholder:text-light-text transition-colors"
          aria-label="Email address"
        />
        <Button variant="primary" size="md" class="w-full sm:w-auto whitespace-nowrap">
          Subscribe
        </Button>
      </div>

      <!-- Trust Note -->
      <p class="text-xs text-light-text mt-4">No spam, ever. Unsubscribe at any time.</p>
    </div>
  </section>

</MarketingLayout>

<style>
  /* line-clamp utilities */
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
